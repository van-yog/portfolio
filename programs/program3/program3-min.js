let windowGame=document.querySelector(".window__game"),shape=document.querySelector("#shape"),checkbox=document.querySelector("#run"),colorShape=document.querySelector("#color");function runFromMouse(e){if(checkbox.checked){console.log("runFromMouse");let o=e.offsetX?e.layerX:e.offsetX,t=e.offsetY?e.layerY:e.offsetY,l=windowGame.getBoundingClientRect(),s=e.target.getBoundingClientRect(),c=s.left-l.left+25,a=s.top-l.top+25,r=s.left-l.left+o,n=s.top-l.top+t;r>c?c-=r+25-c:c+=c+25-r,n>a?a-=n+25-a:a+=a+25-n,c<30&&(c=30),a<30&&(a=30),c+30>l.width&&(c=l.width-30),a+30>l.height&&(a=l.height-30),shape.style.top=a-25+"px",shape.style.left=c-25+"px"}}function changePosition(e){if(!checkbox.checked){let o=e.offsetX?e.layerX:e.offsetX,t=e.offsetY?e.layerY:e.offsetY,l=windowGame.getBoundingClientRect(),s=e.target.getBoundingClientRect();"SPAN"==e.target.tagName&&(o=s.left-l.left+o,t=s.top-l.top+t),o<30&&(o=30),t<30&&(t=30),o+30>l.width&&(o=l.width-30),t+30>l.height&&(t=l.height-30),shape.style.top=t-25+"px",shape.style.left=o-25+"px"}}function circle(){let e=document.querySelector("#shape");e.classList.remove("square"),e.classList.remove("moon"),e.classList.add("circle"),e.style.backgroundColor=colorShape.value,colorShape.disabled=!1}function square(){let e=document.querySelector("#shape");e.classList.remove("circle"),e.classList.remove("moon"),e.classList.add("square"),e.style.backgroundColor=colorShape.value,colorShape.disabled=!1}function moon(){let e=document.querySelector("#shape");e.classList.remove("circle"),e.classList.remove("square"),e.classList.add("moon"),e.style.backgroundColor="#00ffff",colorShape.disabled=!0}windowGame.addEventListener("click",changePosition),shape.addEventListener("mousemove",runFromMouse),colorShape.addEventListener("change",()=>shape.style.backgroundColor=colorShape.value);