"use strict";let toDo=document.querySelector("#toDo"),toDoList=document.querySelector("#toDoList"),btnForm=document.querySelector("#btnForm"),formToDo=document.querySelector("#formToDo"),filterFrom=document.querySelector("#filter"),task=document.forms.formToDo.task,addToDo=document.forms.formToDo.addToDo,clearTasks=document.forms.formToDo.clearTasks,markTasks=document.forms.formToDo.markTasks;function showFilteredTasks(){let e=document.querySelector("#filter").value;if(document.querySelectorAll(".hide").forEach(e=>e.classList.remove("hide")),"showDone"===e){document.querySelectorAll(".listStyle").forEach(e=>{e.classList.contains("done")||e.classList.add("hide")})}else if("showNeedToDo"===e){document.querySelectorAll(".done").forEach(e=>e.classList.add("hide"))}}function createTask(){console.dir(filter);let e=task.value;""===e?console.log("Enter data"):localStorage[e]?console.log("Task already create"):(addNewTask(e),task.value=""),console.log(localStorage)}function addNewTask(e){localStorage.setItem(e,"needToDo");let o=document.querySelector("#filter").value,t=document.createElement("li");t.innerText=e,addControlButtons(t),"showDone"===o&&t.classList.add("hide"),toDoList.append(t)}function showLocalStorage(){if(console.log(localStorage),localStorage.length)for(let e=0;e<localStorage.length;e++){let o=localStorage.key(e);if("done"===localStorage[o]||"needToDo"===localStorage[o]){let e=document.createElement("li");e.innerText=o,addControlButtons(e),"done"===localStorage[o]&&e.classList.add("done"),toDoList.append(e)}}}function clear(){console.log("clear");for(let e=0;e<localStorage.length;e++){let o=localStorage.key(e),t=localStorage[o];"done"!==t&&"needToDo"!==t||(console.log("Mi ydalyaem: "+o+"   "+localStorage[o]),localStorage.removeItem(o),e=-1)}for(;toDoList.firstChild;)toDoList.firstChild.remove();console.log(localStorage)}function allDone(){console.log("allDone");let e,o,t=document.querySelector("#filter").value;for(let t=0;t<localStorage.length;t++)e=localStorage.key(t),"needToDo"===(o=localStorage[e])&&(localStorage[e]="done");toDoList.querySelectorAll("li").forEach(e=>{e.classList.remove("hide"),e.classList.add("done"),"showNeedToDo"===t&&setTimeout(hide,500,e)}),console.log(localStorage)}function workWithTasks(e){console.log(e);let o=e.target.name,t="btnDone"===o||"btnDelete"===o?e.path[1]:e.path[2],l=t.innerText,a=document.querySelector("#filter").value;"delete"!==o&&"btnDelete"!==o||(localStorage.removeItem(l),t.remove()),"done"!==o&&"btnDone"!==o||(localStorage[l]=t.classList.contains("done")?"needToDo":"done",t.classList.toggle("done"),"showDone"===a&&setTimeout(hide,500,t),"showNeedToDo"===a&&setTimeout(hide,500,t)),console.log(localStorage)}function hide(e){e.classList.add("hide")}function addControlButtons(e){let o=document.createElement("img");o.setAttribute("src","./src/img/done.png"),o.setAttribute("name","done");let t=document.createElement("img");t.setAttribute("src","./src/img/delete.png"),t.setAttribute("name","delete");let l=document.createElement("button");l.append(t),l.classList.add("btn"),l.classList.add("btn-light"),l.classList.add("ml-3"),l.setAttribute("name","btnDelete");let a=document.createElement("button");a.append(o),a.classList.add("btn"),a.classList.add("btn-light"),a.classList.add("mr-3"),a.setAttribute("name","btnDone"),e.classList.add("listStyle"),e.prepend(a),e.append(l)}showLocalStorage(),btnForm.addEventListener("click",()=>{toDo.classList.toggle("open");let e=btnForm.innerText;btnForm.innerText="Open toDo"===e?"Close toDo":"Open toDo"}),document.body.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),console.log("Enter"),createTask())}),addToDo.addEventListener("click",createTask),clearTasks.addEventListener("click",clear),markTasks.addEventListener("click",allDone),toDoList.addEventListener("click",e=>workWithTasks(e)),filterFrom.addEventListener("change",showFilteredTasks);